import { LiveEditorBlock, GeneratePropsTable, CodeBlock } from '../../../utils/';
import { DocLink } from '../../../utils/pageUtils';
import { Field } from '@transferwise/components';
import { Checkbox, Alert, DateInput, Sentiment, Size } from '@transferwise/components';
import code from '../../../liveEditorCode/field.new.code';
import { getFieldValidationFailures } from '@transferwise/neptune-validation';

Field is a component that wraps an input and returns the input with an alert message.

<LiveEditorBlock code={code} scope={{ Field, getFieldValidationFailures }} />
<GeneratePropsTable componentName="Field" />

## Validations

Field component do not provide validation itself but it does accept an array of validation messages that will be displayed in an InlineAlert component.

Validation messages are automatically attached to the children with styling.

The validation logic has been not integrated inside Field on purpose so consumers can provide their own custom validation logic.

### Default validations

A set of default validations is provided and they should cover common scenarios. These validations are povided with statndard translated error messages that can be overrided.

The default supported validations are:

**Any type **:

- required
- pattern

** String type **

- minLength
- maxLength

** Number type **

- minimum
- maximum

Default validations can be access via the method

`import { getFieldValidationFailures } from '@transferwise/neptune-validation';`

getFieldValidationFailures accepts two parameters: value and rules, where value is the value to be validated and rules are the values to validate the value against

An example of usage is :

```
const rules = {
  type: 'string',
  required: { value: true, message: 'Custom required' },
  minLength: { value: 3 },
  maxLength: { value: 6, message: 'Custom maxLength error message' },
};

const failures = getFieldValidationFailures(val, rules);
```

In the example above the failures can be in the format:

```
[{
  message: "minLength"
  value: 3
}]
```

When requesting a validation always make sure type is provided.

<Alert
  message={
    'When validating a numeric value, the value passed to getFieldValidationFailures has to be casted to number because html number inputs returns string!'
  }
  type={Sentiment.WARNING}
/>

When a message is not provided for a specific rule Field will populate the InlineAlert with the default message (if defined) for that specific failure.

If a custom message is provided for a specific rule it will be the one attached to the Field if that specific failures occurs.

export const meta = {
  name: `Field`,
};
